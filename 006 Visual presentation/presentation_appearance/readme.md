## Presentation appearance schema

### 0 Термины (как по русски назвать используемые понятия):

**graphical appearance** - 

**appearance attributes** - 

**presented picture** - 

**presentation context** - 

**Approximation tolerances** - 

**Occlusion** - 

**invisibility** - 

### 1 Общие положения

Предметом схемы presentation_appearance является спецификация предполагаемого графического оформления (graphical appearance) представленного изображения (presented picture). Схема presentation_appearance также определяет механизм, который позволяет соответствующим образом связать эти атрибуты внешнего вида (appearance attributes) с annotation_occurrences в контексте presentation_representation. Таким образом, контекст presentation_representation может быть использован для определения внешнего вида различных элементов на изображении.

### 2 Определение стиля презентации (Assignment of presentation style)

Схема presentation_appearance позволяет связать атрибуты внешнего вида с выбранными примитивами аннотаций и элементами формы продукта. В этом документе стиль презентации может быть назначен любому элементу представления (representation_item). Назначение стиля выполняется путем создания экземпляра styled_item, который ссылается на representation_item вместе с его presentation_style_assignment. 

presentation_style_assignment само по себе представляет собой набор различных стилей презентации, таких как стиль точки, стиль кривой или стиль текста. При стилизации нестилированного элемента representation_item создается новый элемент representation_item, которому назначен стиль представления. Назначение presentation_style_assignment для элемента styled_item влияет на внешний вид элемента representation_item, на который ссылается ссылка, а также на внешний вид всех элементов representation_item, на которые прямо или косвенно ссылается этот элемент. Затрагиваются только те элементы representation_items, которые еще не стилизованы. Это означает, что стилизация стилизованного элемента representation_item не имеет эффекта, стилизация частично стилизованного элемента representation_item влияет только на внешний вид нестилированных частей, а стилизация нестилированного элемента representation_item влияет на внешний вид всего элемента. Могут быть представлены только стилизованные элементы представления. Будут ли они представлены на самом деле, зависит от нескольких других факторов, таких как невидимость слоев, удаление скрытых линий и поверхностей, а также отсечение. В этом документе не делается никаких заявлений об эффекте в случае возникновения конфликтов стилей. Конфликт стилей возникает, например, когда элемент presentation_item используется несколькими элементами styled_items.

Параметр presentation_style_assignment используется для присвоения стиля элементу presentation_item независимо от контекста презентации (presentation context). Подтип presentation_style_assignment, presentation_style_by_context, позволяет назначать стиль для определенного контекста презентации. Контекстом презентации может быть любой набор презентаций, представление или элемент представления. В последнем случае стиль может быть назначен элементу в целом, а другой стиль может быть назначен части этого элемента.

Назначение стиля может быть отменено с помощью over_riding_styled_item. Подтип over_riding_styled_item, context_dependent_over_riding_styled_item, позволяет изменять стиль для определенного контекста представления.

### 3 Типы стилей презентации (Types of presentation styles)

Для каждого примитива аннотации, определенного в presentation_definition_schema, существует специальная группа стилей (group of styles). Это стили точек, стили кривых, стили областей заливки, стили поверхностей, стили текста и стили символов. Этот документ не ограничивает назначение стиля элементам формы изделия. Например, он позволяет назначать стиль поверхности точке. Однако на внешний вид элемента формы изделия влияют только соответствующие стили; например, стили поверхностей влияют только на поверхности, стили областей заливки и стили кривых влияют только на кривые, а стили точек влияют только на точки, кривые и поверхности. Для элементов формы изделия высокого уровня, таких как твердотельные модели, Application Protocol должен указывать, какие стили влияют на внешний вид этих элементов. Тем не менее, назначение стиля для примитивов аннотаций является более строгим. Подробную информацию об этих ограничениях можно найти в разделе 5 "подтипы annotation_occurrence".

Стили презентации могут быть заданы с использованием ресурсов этой схемы, могут быть определены извне или могут быть предварительно определены Application Protocols. Стили представления, определенные в этой схеме, включают следующее.

**Стили точек (Point styles)** предоставляют ресурсы для определения внешнего вида точек. Они позволяют указать символ маркера, его размер и цвет, которые будут использоваться для представления точек. Стили точек могут быть заданы с помощью объекта point_style.

**Стили кривых (Curve styles)** предоставляют ресурсы для определения визуального вида кривых. Они позволяют задавать шрифты (тип линии?) кривых (curve fonts), ширину кривой, внешний вид концов и углов кривой, цвет или узоры для заполнения видимых сегментов кривой. 

- Шрифт (тип линии?) кривой определяет, должна ли кривая быть нарисована с использованием сплошных, пунктирных или пунктирно-точечных линий. Схема presentation_appearance_schema позволяет задавать произвольные шаблоны для линий кривых и использовать внешние или предопределенные типы линий кривых. Объектами, используемыми для определения типов линий с кривыми, являются externally_defined_curve_font, pre_defined_curve_font, curve_style_font, curve_style_font_pattern и curve_style_font_and_scaling. 

- Ширина кривой может быть задана в виде меры или заранее определенного размера. 

- Концы и углы кривой могут быть заданы в виде квадратов или закруглений, а для концов кривой можно указать удлинение или недостаток. Объектами, поддерживающими эту структуру, являются curve_style_with_ends_and_corners и curve_style_with_extension. 
  
- Параметр curve_style_wide позволяет задать стиль области заливки, который используется для заполнения видимых сегментов кривой. Это было включено для удовлетворения требований чертежников к представлению кривых. 
  
- Параметр curve_style_rendering управляет отображением кривых на поверхности и описывается вместе со стилями поверхности.

**Стили областей заливки (Fill area styles)** предоставляют ресурсы для определения внешнего вида областей заливки аннотаций. Они позволяют задавать сплошной цвет, штриховки или узоры листов (tiling patterns). 

- Параметр fill_area_style_colour можно использовать для указания сплошного цвета, который используется для отображения области заливки. 
- Шаблоны штриховки могут состоять из наборов параллельных линий с произвольным углом наклона. В качестве альтернативы, шаблоны штриховки могут быть заданы извне или заранее. Объектами для штриховки являются fill_area_style_hatching, pre_defined_hatch_style, externally_defined_hatch_style и one_direction_repeat_factor. Мозаичные узоры могут состоять из кривых, цветных областей или символов. В качестве альтернативы, мозаичный узор может быть задан извне или заранее. Мозаичные узоры повторяются в двух направлениях, которые задаются произвольными векторами. 
- Объектами для определения шаблонов листов являются pre_defined_tile_style, externally_defined_tile_style, fill_area_style_tiles, fill_area_style_tile_curve_with_style, fill_area_style_tile_coloured_region, fill_area_style_tile_symbol_with_style, pre_defined_tile, externally_defined_tile и two_direction_repeat_factor.

**Стили поверхностей (Surface styles)** предоставляют ресурсы для определения внешнего вида поверхностей. К каждой стороне поверхности могут быть применены отдельные стили поверхностей или для обеих сторон могут использоваться одни и те же стили поверхностей. Использование стиля поверхности определяет стиль стороны поверхности для одной или обеих сторон поверхности. Объектами для присвоения стиля сторонам поверхности являются surface_style_usage и surface_side_style. Стиль боковой поверхности может представлять собой любую комбинацию стиля области заливки, стиля границ, стиля силуэта, стиля кривой сегментации, стиля управляющей сетки, стиля линий параметров или стиля визуализации.

**Стиль области заливки (fill area style)** определяет сплошной цвет, штриховку или мозаичный рисунок для заполнения боковых сторон поверхности.

**Стиль границы (boundary style)** определяет стиль кривой или метод визуализации и свойства для представления кривых границ поверхности. Если стиль границ не указан, кривые границ отображаться не будут.

**Стиль силуэта (silhouette style)** определяет стиль кривой или метод визуализации и свойства для представления кривых силуэта поверхности. Если стиль силуэта не указан, кривые силуэта отображаться не будут.

**Стиль кривой сегментации (segmentation curve style)** определяет стиль кривой или метод визуализации и свойства для представления кривых сегментации поверхности. Этот стиль применяется только к поверхностям, которые разделены на сегменты, таким как поверхности в виде B-сплайнов. Если стиль кривой сегментации не указан, кривые сегментации отображаться не будут.

**Стиль управляющей сетки (control grid style)** определяет стиль кривой или метод визуализации и свойства для представления сетки из контрольных точек, которые используются для определения поверхности. Этот стиль влияет только на поверхности, которые определены поверх сетки из контрольных точек, такие как поверхности в виде B-сплайнов. Если стиль управляющей сетки не указан, то управляющая сетка не должна быть представлена.

**Стиль линий параметров (parameter line style)** определяет стиль кривой или метод визуализации и свойства для представления линий поверхности с параметрами iso. Для этого стиля необходимо указать количество линий параметров в каждом направлении параметров. Если стиль линий параметров не указан, линии параметров отображаться не будут.

Объектами, определяющими эти стили поверхностей, являются surface_fill_area, surface_style_boundary, surface_style_silhouette, surface_style_segmentation_curve, surface_style_control_grid и surface_style_parameter_line.

Объекты curve_style_rendering и surface_rendering_properties определяют метод рендеринга и свойства кривых на поверхности. Стиль рендеринга определяет метод, который должен использоваться для рендеринга поверхности. Если указан этот стиль, то для представления поверхности выполняется рендеринг с использованием расчета коэффициента отражения. Для этого стиля необходимо указать цвет поверхности. При желании можно указать дополнительные свойства рендеринга, включая прозрачность и коэффициенты окружающего, рассеянного и зеркального отражения. Объектами для стилей рендеринга являются surface_style_rendering, surface_style_rendering_with_properties, surface_style_transparent, surface_style_reflectance_ambient, surface_style_reflectance_ambient_diffuse и surface_style_reflectance_ambient_diffuse_specular. Помимо перечисленных выше стилей, также могут быть предварительно определены стили поверхностей.

**Стили текста (Text styles)** предоставляют ресурсы для определения внешнего вида текста аннотации. Выравнивание текста, характеристики рамок, межсимвольный интервал и зеркальная ось влияют на внешний вид всего текста, в то время как стиль глифов влияет на внешний вид отдельных символов, составляющих текст. Выравнивание текста определяет способ выравнивания текста. Поддерживаемые типы выравнивания определяются прикладными протоколами. Характеристики поля определяют геометрию поля символов. Поле символов представляет собой параллелограмм, для которого можно задать ширину, высоту, угол наклона и угол поворота. Текстовый интервал определяет расстояние, которое должно быть указано между соседними полями символов в строке, в дополнение к интервалу, указанному в определении шрифта. Зеркальное отображение текста определяет ось зеркального отображения, которая будет использоваться для зеркального отображения текста. Зеркальное отображение выполняется после применения всех остальных текстовых стилей. Объектами, поддерживающими определение этих текстовых стилей, являются text_style, text_style_with_spacing, text_style_with_mirror, text_style_with_justification и text_style_with_box_characteristics. Стилем символьного глифа может быть стиль контура, стиль обводки или только цвет текста. Стиль контура - это стиль кривой, который используется для представления контуров, составляющих символьный глиф. При желании можно указать стиль области заливки для заполнения контуров. Стиль контура влияет только на символы-глифы, которые определяются контурами. Стиль обводки - это стиль кривой, который используется для отображения штрихов, составляющих символьный глиф. Стиль обводки влияет только на символы, которые определяются штрихами. Для предварительно определенных и определяемых извне шрифтов должен быть указан только цвет. Объектами, поддерживающими определение этих стилей символьных глифов, являются character_glyph_style_stroke, character_glyph_style_outline, character_glyph_style_outline_with_characteristics и text_style_for_defined_font.

**Стили символов (Symbol styles)** предоставляют ресурсы для определения внешнего вида символов аннотаций. Стиль символов - это произвольный набор стилей точек, стилей кривых, стилей областей заливки, стилей поверхностей и стилей текста. Объектами, поддерживающими определение этих стилей символов, являются symbol_style, symbol_element_style и symbol_colour.

### 4 Допустимые погрешности аппроксимации (Пределы отклонений при моделировании?) (Approximation tolerances)

Допуски аппроксимации определяют допустимые отклонения между формой представленных элементов и их математически точным положением и формой. Допуски аппроксимации применяются к кривым и поверхностям и могут быть указаны в области параметров, области формы изделия или области представления. Область, в которой задаются допуски, зависит от используемого метода аппроксимации. Для методов аппроксимации отклонения по длине хорды допуск может быть задан в области формы изделия или области представления. Для метода аппроксимации параметров допуск должен быть указан в пространстве параметров.

### 5 Частичное и полное скрытие объектов (Occlusion and invisibility)

Схема presentation_appearance_schema предоставляет ресурсы для определения предполагаемого внешнего вида элементов, которые скрывают друг друга, поскольку они перекрываются в двумерном пространстве. Эти элементы включают в себя элементы иерархии представления, которые определены в пункте 4 этого документа, annotation_fill_areas, тексты аннотаций с разграничениями, иероглифы и символы. Для этой цели для любых двух из этих элементов может быть задано значение occlusion_precedence.

Кроме того, схема presentation_appearance_schema предоставляет ресурсы для определения невидимости стилизованных элементов или слоев.

### 6 Визуальная текстура поверхности

Схема presentation_appearance_schema предоставляет ресурсы для определения связи внешнего изображения с мозаичной геометрией, в частности, с Tessellated_face и Tessellated_surface_set.

### 7 Цвета вершин для полигональной геометрии

Схема presentation_appearance_schema предоставляет ресурсы для определения связи информации о цвете с вершинами элементов полигональной геометрии, в частности с вершинами Tessellated_face, Tessellated_surface_set, Tessellated_shell и Tessellated_solid. Информация о цвете задается с использованием целых троек для представления цветов RGB или целых четверек для представления значений цвета RGB с прозрачностью.