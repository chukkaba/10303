Схема representation на языке Express приведена в ГОСТ Р ИСО 10303-43-2022. Ниже приводится описание применения данной схемы для представления свойств изделий машиностроения и их СЧ.


Representation_schema определяет общую структуру представления (representation). 

## Термины:

**представление (representation)** - Набор связанных элементов данных, используемый для одной или нескольких конкретных целей (представления определенной информации об объекте)

**контекст (context of representation)** - Логическое (смысловое) определение (база), посредством которого элементы представления связаны друг с другом

**элемент представления (representation item)** - Элемент данных, который участвует в формировании представления либо непосредственно, либо через другие элементы представления

**основанное (founded)** - Cвойство элемента представления, являющееся результатом его прямой или косвенной связи с контекстом представления

## Схема представления

![](source/representation.png)

Для представления некоторого аспекта сведений об изделии (например, свойства изделия) могут быть созданы информационные наборы - **представления** (representation). Каждый элемент в таком информационном наборе является **элементом представления** (representation_item). Примером свойства изделия, которое может быть выражено через представление, является форма изделия. 

При описании схемы представления не играет роли, для описания какого аспекта или свойства изделия это представление используется. 

Элементы представления (representation_item) собираются в информационный представления (representation) с использованием общего контекста. Этот контекст называется контекстом представления (representation_context).

Не все элементы данных об изделии должны описываться с использованием представлений. Те элементы, которые могут входить в представление, определяются как элементы представления (representation_item). Элементы представления - это те элементы, которые имеют значение только в рамках определенного контекста. Например, точка - это элемент представления, который имеет значение только в рамках контекста конкретного координатного пространства. В отличие от точки, имя человека не является элементом представления, поскольку оно имеет значение отдельно от любого контекста.

Элемент представления может входить в представление (как сказано выше), а также может поддерживать определение других элементов представления. 

Представление (информационный набор) может содержать множество элементов представления, каждый из которых участвует в одном или нескольких представлениях. Эти представления могут быть связаны между собой, образуя структуру, которая также связывает контексты представления. Затем эта структура может быть использована для определения того, какие элементы представления могут быть связаны друг с другом значимым образом. Например, расстояние между точками имеет смысл только в том случае, если системы координат, в которых эти точки определены, могут быть связаны между собой.

Представления, не связанные в одном контексте, могут быть связаны в другом. Рассмотрим представление формы детали и ее компонентов. Форма каждого компонента может быть представлена как независимое понятие, не связанное с формой других компонентов. Однако в контексте собранной детали формы компонентов взаимосвязаны.

Аспект данных об изделии может иметь ноль, одно или множество представлений, ни одно из которых не является концепцией (изделия?) как таковой. Например, форма детали может быть представлена набором как двумерных геометрических данных, так и конструктивной твердотельной геометрией (constructive solid geometry). Любое представление является идеализацией формы.

Каждое представление не обязательно является полной моделью какого-либо аспекта данных об изделии, но оно может представлять модель аспекта, подходящую для конкретных применений. Ни одно из представлений формы из предыдущего абзаца не  является обязательно полным представлением концепции формы (???). Еще одно представление формы может включать информацию о допусках. Скорее всего, каждое представление подходит для какого-то конкретного применения или подхода.

## Общие положения

4.1 Представления - это структуры, которые связывают набор элементов данных об изделии с контекстом. Представления используются для описания аспектов продуктов. Связи между представлениями и аспектами продуктов, которые они описывают, задаются с использованием схемы "product_property_representation" (???)

4.2 Представления могут использоваться для:

- описания свойства изделия или взаимосвязи между двумя свойствами (изделия и(или) его части);

ПРИМЕЧАНИЕ 1 Использование представлений для описания свойств изделия установлено в стандарте ISO 10303-41

- описания изображения.

ПРИМЕЧАНИЕ 2 Использование представлений для описания изображения изделия установлено в стандарте ISO 10303-46 (visual_presentation)

4.3 Одно представление может быть частью другого представления.

ПРИМЕР 1. Набор линий и точек описывает форму стены. Это представление можно использовать как часть описания формы здания, частью которого является стена.

4.4 Каждое представление имеет контекст и набор элементов, определенных в этом контексте.

ПРИМЕР 2. Для представления геометрических элементов контекстом является координатное пространство.

4.5 Контекст может быть связан с другими контекстами.

ПРИМЕР 3. Локальные координатные пространства могут быть определены для каждого здания в промышленном комплексе. Эти координатные пространства могут быть связаны друг с другом и с координатным пространством самого производственного комплекса.

4.6 Можно задать преобразования между представлениями.

4.7 Элементы представления считаются связанными, если:

- они являются элементами одного и того же представления, или
- они являются элементами разных представлений, которые имеют одинаковый контекст, или
- это элементы в разных представлениях, которые имеют разные контексты, но эти контексты связаны.
  
ПРИМЕР 1 Рассмотрим две точки со значениями координат (0,0,0) и (1,0,0). Невозможно вычислить расстояние между этими точками, пока не будет установлено, что они находятся в одном координатном пространстве. Спецификация точки сама по себе не содержит достаточно данных, чтобы указать, в каком координатном пространстве она находится и какие другие элементы также разделяют это координатное пространство. Точка является примером элемента представления, а координатное пространство - примером контекста.

4.8 Представление может использоваться более одного раза. Представление не зависит от его использования.

ПРИМЕР 2. Рассмотрим набор точек и линий в координатном пространстве. Этот набор можно использовать для описания формы изделия. Она также может быть использована, возможно, с некоторыми изменениями, для описания чертежа или изображения продукта. Ни одно из этих применений не является частью определения самого набора.

4.9 Контекст представления существует только как база для представлений, которые его используют. Следовательно, контексты представления связаны только в том случае, если представления, использующие контексты, связаны.

ПРИМЕЧАНИЕ 2. Контексты представления могут быть дополнительно специализированы в аннотированных ЭКСПРЕСС-схемах, которые используют эту схему или специализируют ее. Возможные специализации включают контексты для геометрии, топологии, конечно-элементного моделирования и кинематического моделирования.

4.10 Элементы представления непосредственно входят в представление или поддерживают определение другого элемента представления, или и то, и другое.

ПРИМЕР 4 Точка может быть единственным элементом в представлении местоположения продукта, или она может служить конечной точкой линии, которая является единственным элементом в представлении края продукта. В первом случае точка сама по себе непосредственно является элементом в представлении. Во втором случае точка служит только для определения линейного объекта.

ПРИМЕР 5 Элемент представления, который определяет представление текстовой строки, может быть частью описания чертежа. В этом случае он непосредственно участвует в представлении. В качестве альтернативы, тот же элемент представления может быть частью выноски размера. Во втором случае текст является частью выноски и косвенно участвует в описании чертежа.

ПРИМЕЧАНИЕ 3 Элементы представления, которые описывают представление текстовых строк, указаны в стандарте ISO 10303-46. Элементы представления, которые описывают выноски размеров, описаны в стандарте ISO 10303-101.

4.11 Элементы представления могут ссылаться друг на друга, образуя таким образом графы из таких элементов, в которых каждый граф имеет идентифицируемый корень. Связь корневого элемента с контекстом связывает все элементы в графе с контекстом.

ПРИМЕР 6 Кривая определяется несколькими точками. Все эти точки находятся в том же координатном пространстве, что и кривая, в силу их привязки к кривой.

### Объединение представлений

![](source/representation_relationship.png)

1. Представление может быть связано с другим представлением.

2. Одно представление может быть связано с другим представлением таким образом, что они оба участвуют в объединении, но одно не определяет другое. Этот тип связи соответствует типу данных сущности representation_relationship.

3. Одно представление может быть связано с другим представлением таким образом, что первое является частью определения второго. Этот тип связи соответствует типам данных объектов mapped_item и representation_map.

### Объединение элементов в рамках представлений

Две коллекции элементов представления могут находиться в двух отдельных, не связанных между собой контекстах и, тем не менее, быть связанными в третьем контексте или быть связанными только потому, что они оба участвуют в взаимосвязанной структуре.

ПРИМЕР 7. Два набора точек и линий, каждый из которых представляет форму разных деталей. Каждое из этих представлений существует независимо от контекста и совершенно не связано с другим. Третий контекст существует для формы сборки, компонентами которой являются эти детали. В этом третьем контексте все элементы связаны посредством набора ассоциаций представления каждой части с представлением сборки. Существует связь представления части с представлением сборки для каждого использования этой части в сборке.

ПРИМЕР 8. Два набора точек и линий, каждый из которых представляет форму разных деталей. Каждое из этих представлений существует независимо от контекста и совершенно не связано с другим. Третий контекст существует для формы сборки, компонентами которой являются эти детали. В этом третьем контексте все элементы связаны через третью коллекцию этих элементов, которая определяет этот контекст сборки.

### Объединение элементов в рамках представлений с использованием структуры индивидуальных отношений

![](source/representation_item.png)

1. Каждый элемент representation_item в одном представлении может быть преобразован в соответствующий элемент representation_item в другом представлении с помощью одного преобразования.

2. Преобразование соответствует representation_relationship_with_transformation, где этот элемент representation_relationship_with_transformation указывает либо item_defined_transformation, либо functionally_defined_transformation с помощью атрибута transformation_operator.

3. Явное преобразование может быть определено с помощью элемента representation_relationship_with_transformation, когда этот элемент указывает functionally_defined_transformation в определенном преобразовании типа с помощью атрибута transformation_operator.

4. Неявное преобразование может быть определено элементом representation_relationship_with_transformation, когда этот элемент указывает item_defined_transformation в определенном преобразовании типа с помощью атрибута transformation_operator.

ПРИМЕЧАНИЕ 4. Объединение элементов в рамках представлений с использованием индивидуальной структуры отношений может быть указано в аннотированных ЭКСПРЕСС-схемах, которые используют эту схему или специализируются на ней.

### Объединение элементов в представлениях с использованием агрегированной структуры

1. Пара связанных таким образом элементов представления не имеет математического отношения друг к другу, поскольку они связаны таким образом.
   
2. Пара связанных таким образом элементов representation_items может быть включена в агрегированный набор элементов set_item_defined_transformation в определенном преобразовании типа данных, которое задается членом representation_relationship_with_transformation.
   
ПРИМЕР 9. Две коллекции representation_items представляют разные свойства детали. Одно представление предназначено для функциональных свойств. Второе представление предназначено для свойств формы. Функциональные свойства и свойства формы не связаны. Каждая коллекция представляет собой представление. 

Желательно эффективно указать определяемую пользователем связь между выбранным пользователем элементом представления в функциональной коллекции и выбранным пользователем элементом представления в коллекции формы. Совокупный параметр set_item_defined_transformation определяет набор элементов item_defined_transformation, которые пользователь заполнил, чтобы связать соответствующие элементы представления. На совокупный set_item_defined_transformation ссылается член representation_relationship_with_transformation в роли transformation_operator.


### Преобразование

Элементы в разных представлениях могут сравниваться, если:
- представления имеют одинаковый контекст или
- определено преобразование, которое связывает представления друг с другом.

Преобразование берет каждый элемент a в A и сопоставляет его элементу b в B, используя оператор преобразования (->).

Для полной спецификации преобразования требуется следующее:

- набор элементов a, подлежащих преобразованию;
- набор элементов b, являющийся результатом преобразований;
- определение контекста A, который является общим для набора элементов a;
- определение контекста B, который является общим для набора элементов b;
- определение оператора преобразования (->).

Домен A и диапазон B являются экземплярами типа данных сущности representation_context. Элементы a и b являются экземплярами типа данных сущности representation_item. Элемент a - это элемент в представлении, контекст которого равен A; элемент b - это элемент в представлении, контекст которого равен B

### Операторы преобразования

В этом документе используются два разных подхода к определению операторов преобразования.

1) Оператор преобразования может быть указан отдельно. В этом типе преобразования используется оператор преобразования, соответствующий типу данных объекта functionally_defined_transformation.

ПРИМЕР 10 Два представления связаны таким образом, что одно из них повернуто и смещено относительно другого. Это может быть представлено преобразованием, которое определяет функциональное_определенное преобразование, представленное матрицей.

ПРИМЕЧАНИЕ 6. Структуры данных для конкретных видов функционально определяемой трансформации, таких как матрицы, в этой части стандарта ISO 10303 не указаны.

ПРИМЕР 11 Существуют два представления: одно состоит из трехмерной поверхности, представляющей поверхность Земли; другое состоит из точек на двумерном изображении. Они связаны преобразованием (которое включает в себя functionally_defined_transformation), которое преобразует трехмерную поверхность в двумерное изображение и применяет коэффициент масштабирования.

2) Можно указать элемент a в контексте A и элемент b в контексте B, которых достаточно для получения преобразования. Этот тип преобразования использует оператор преобразования, который соответствует типу данных объекта item_defined_transformation или отображению, определяемому типом данных объекта mapped_item.
   
ПРИМЕР 12 Преобразование между координатными пространствами может быть однозначно определено двумя экземплярами представления r1 и r2, двумя экземплярами representation_context A и B (A, на который ссылается r1, и B, на который ссылается r2) и двумя экземплярами axis2_placement_3d a1 и b1 (a1 в r1 и b1 в r2), так что оператор преобразования указывает a1 и b1. Принимающее приложение вычислило бы соответствующее преобразование из этой совокупности данных и применило бы его к каждому из элементов в r1, чтобы создать обновленную модель в памяти приложения.

ПРИМЕЧАНИЕ 7. Тип данных объекта axis2_placement_3d определен в стандарте ISO 10303-42 [4].

### Неопределенность

Числовые значения, которые измеряются или рассчитываются, могут быть неточными. Неопределенность - это мера доверительного интервала, связанного с этой неточностью. В настоящем Международном стандарте неопределенность может быть определена для:

- нескольких представлений, которые имеют общий контекст;
- отдельных представлений;
- отдельных элементов представления.

В этой части стандарта ISO 10303 поддерживаются пункты (1) и (2).

ПРИМЕЧАНИЕ 8 (3) поддерживается стандартом ISO 10303-45 [5].

ПРИМЕЧАНИЕ 9 Неопределенность не связана с допусками или допустимыми отклонениями. Они поддерживаются стандартом ISO 10303-47 [7].

1. Неопределенность для числовых значений может быть задана для всех представлений, которые совместно используют контекст. Это задается с использованием типа данных сущности global_uncertainty_assigned_context.

2. Неопределенность для числовых значений может быть задана для представления в данном контексте. Это задается с использованием типа данных объекта uncertainty_assigned_representation.

Если неопределенности указаны более одного раза, должны применяться следующие правила приоритета. Неопределенность, указанная для отдельного элемента представления, должна иметь приоритет над неопределенностью, указанной любым неопределенностью_назначенным представлением, в котором участвует этот элемент. Неопределенность, указанная в uncertainty_assigned_representation, должна иметь приоритет над неопределенностью, указанной в любом глобальном контексте uncertainty_assigned_context, в котором участвует это представление.

ПРИМЕЧАНИЕ 10 Неопределенность для отдельного элемента представления определяется типом данных сущности qualified_representation_item, определенным в стандарте ISO 10303-45 [5].